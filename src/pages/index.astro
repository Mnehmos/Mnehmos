---
import BaseLayout from "../layouts/BaseLayout.astro";
import Hero from "../components/Hero.astro";
import StatsSection from "../components/StatsSection.astro";
import ProjectCard from "../components/ProjectCard.astro";

const base = import.meta.env.BASE_URL;

// Featured projects data - VERIFIED FROM ACTUAL READMES
const featuredProjects = [
  {
    title: "Multi-Agent Framework",
    description:
      "Production-ready multi-agent coordination with TDD workflows (Red→Green→Blue). Role contracts for Orchestrator, Architect, Planner, Code, Debug. IDE integrations for Roo Code, Claude Code, Cursor.",
    type: "framework" as const,
    link: "https://github.com/Mnehmos/mnehmos.multi-agent.framework",
    liveUrl: "https://mnehmos.github.io/mnehmos.multi-agent.framework/",
    tags: ["TypeScript", "TDD", "Multi-Agent", "Claude Code"],
    stats: { stars: 528 },
    featured: true,
  },
  {
    title: "OODA MCP",
    description:
      "Full computer control implementing the OODA pattern—observe (screen), orient (context), decide (LLM), act (input). 62 tools for desktop automation.",
    type: "mcp-server" as const,
    link: "https://github.com/Mnehmos/mnehmos.ooda.mcp",
    tags: ["TypeScript", "MCP", "Desktop Automation", "OODA"],
    stats: { tools: 62 },
    featured: true,
  },
  {
    title: "Index Foundry MCP",
    description:
      "Deterministic Vector Index Factory for RAG pipelines. Connect → Extract → Normalize → Index → Serve with Railway deployment.",
    type: "mcp-server" as const,
    link: "https://github.com/Mnehmos/mnehmos.index-foundry.mcp",
    tags: ["TypeScript", "RAG", "Vector Search", "MCP"],
    stats: { tools: 40 },
    featured: true,
  },
  {
    title: "Quest Keeper AI",
    description:
      "Desktop RPG companion (Tauri app) combining AI Dungeon Master with visual game engine. 3D battlemap, 2D world map, spellcasting, NPC memory. Uses 145+ MCP tools.",
    type: "game" as const,
    link: "https://github.com/Mnehmos/mnehmos.quest-keeper.game",
    liveUrl: "https://questkeeperai.com",
    tags: ["Tauri", "React", "Three.js", "MCP"],
    stats: { tools: 145 },
    features: ["mcp-tools", "ai-chat"] as ("rag" | "mcp-tools" | "ai-chat")[],
  },
  {
    title: "ChatRPG Game (D&D 5e)",
    description:
      "D&D 5e MCP Server for AI Dungeon Masters. 30+ tools for characters, combat, spells, conditions, spatial calculations. Web client as stateless demo.",
    type: "game" as const,
    link: "https://github.com/Mnehmos/mnehmos.chatrpg.game",
    liveUrl: "https://mnehmos.github.io/mnehmos.chatrpg.game/",
    tags: ["TypeScript", "D&D 5e", "MCP", "Game Engine"],
    stats: { tools: 30 },
    features: ["mcp-tools"] as ("rag" | "mcp-tools" | "ai-chat")[],
  },
  {
    title: "Synch MCP",
    description:
      "Global Memory Bank for AI agent coordination. Context management, filing cabinet, spatial maps, bug tracking, and multi-agent locks.",
    type: "mcp-server" as const,
    link: "https://github.com/Mnehmos/mnehmos.synch.mcp",
    tags: ["TypeScript", "Memory Bank", "Agent Coordination", "MCP"],
    stats: { tools: 19 },
  },
];

const otherProjects = [
  {
    title: "Prompt Taxonomy",
    description:
      "Interactive taxonomy of 100+ prompt engineering techniques from 17 research papers. Searchable, categorized, with visualizations.",
    type: "research" as const,
    link: "https://github.com/Mnehmos/mnehmos.prompts.research",
    liveUrl: "https://mnehmos.github.io/mnehmos.prompts.research/",
    tags: ["JavaScript", "Research", "Prompt Engineering"],
    stats: { techniques: 100 },
  },
  {
    title: "The Long Hall",
    description:
      "Procedural roguelike dungeon crawler with ironman saves, cloud leaderboards, and RPG progression. Browser-based.",
    type: "game" as const,
    link: "https://github.com/Mnehmos/mnehmos.long-hall.game",
    liveUrl: "https://mnehmos.github.io/mnehmos.long-hall.game/",
    tags: ["TypeScript", "Roguelike", "Browser Game"],
  },
  {
    title: "Sight MCP",
    description:
      "Rust MCP server that gives Claude Desktop the ability to see your screen and guide you through UI tasks via overlay. Coming soon.",
    type: "mcp-server" as const,
    link: "https://github.com/Mnehmos/mnehmos.sight.mcp",
    tags: ["Rust", "Vision AI", "Coming Soon"],
  },
  {
    title: "Invoicer",
    description:
      "100% client-side invoice manager. All data stays in localStorage—no server, no tracking.",
    type: "app" as const,
    link: "https://github.com/Mnehmos/mnehmos.invoicer.app",
    liveUrl: "https://mnehmos.github.io/mnehmos.invoicer.app/",
    tags: ["JavaScript", "Privacy-First", "PDF Export"],
  },
];
---

<BaseLayout title="MCP Infrastructure Developer">
  <!-- Hero Section -->
  <Hero />

  <!-- Stats Section -->
  <StatsSection />

  <!-- Featured Projects -->
  <section id="projects" class="py-20">
    <div class="max-w-6xl mx-auto px-6">
      <div class="text-center mb-12">
        <span
          class="inline-block px-3 py-1 bg-copper/10 text-copper rounded-full text-sm font-medium mb-4"
        >
          Featured Work
        </span>
        <h2 class="font-display text-3xl md:text-4xl font-bold text-stone-900">
          Core Projects
        </h2>
        <p class="mt-4 text-stone-600 max-w-2xl mx-auto">
          Infrastructure that enables AI agents to interact with complex
          stateful systems.
        </p>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {featuredProjects.map((project) => <ProjectCard {...project} />)}
      </div>
    </div>
  </section>

  <!-- Other Projects -->
  <section class="py-20 bg-stone-100 dark:bg-stone-900 transition-colors">
    <div class="max-w-6xl mx-auto px-6">
      <div class="text-center mb-12">
        <h2
          class="font-display text-2xl md:text-3xl font-bold text-stone-900 dark:text-stone-100"
        >
          More Projects
        </h2>
        <p class="mt-4 text-stone-600 dark:text-stone-400">
          Research, utilities, and upcoming work.
        </p>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
        {otherProjects.map((project) => <ProjectCard {...project} />)}
      </div>

      <div class="text-center mt-8">
        <a
          href={`${base}projects`}
          class="inline-flex items-center gap-2 text-copper hover:text-copper-light font-medium transition-colors"
        >
          View all projects
          <svg
            class="w-4 h-4"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-20">
    <div class="max-w-4xl mx-auto px-6 text-center">
      <h2
        class="font-display text-3xl md:text-4xl font-bold text-stone-900 mb-6"
      >
        Want to learn more?
      </h2>
      <p class="text-lg text-stone-600 mb-8 max-w-2xl mx-auto">
        Check out my GitHub for full documentation, source code, and live demos
        of all projects.
      </p>
      <div class="flex flex-wrap justify-center gap-4">
        <a
          href={`${base}contact`}
          class="inline-flex items-center gap-2 bg-copper text-white px-6 py-3 rounded-lg font-semibold hover:bg-copper-light transition-colors"
        >
          <svg
            class="w-5 h-5"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
            ></path>
          </svg>
          Get in Touch
        </a>
        <a
          href="https://github.com/Mnehmos"
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center gap-2 bg-stone-900 text-white px-6 py-3 rounded-lg font-semibold hover:bg-stone-800 transition-colors"
        >
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
            <path
              d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
            ></path>
          </svg>
          View GitHub
        </a>
      </div>
    </div>
  </section>
</BaseLayout>
